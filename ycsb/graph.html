<html>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <head>
  <link rel="shortcut icon" type="image/x-icon" href="graph.ico" />
  <title>YCSB Graphs</title>
  <style type='text/css'>
  .bold-font {
    font-weight: bold;
  }

  .italic-font {
    font-style: italic;
  }

  .large-font {
    font-size: 15px;
  }

  .grey-background {
    background-color: #EAEDED;
  }

  .blue-text {
    color: #3498DB;
  }

  .orange-text {
    color: #E67E22;
  }

  .red-text {
    color: #E74C3C;
  }

  .search-bar {
    height: 10px;
    background-color: #e1e1e1;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    position:relative;
    width:150px
  }

.search-bar .searchbutton {
    position:absolute;
    top:0%;
    right:0px;
    height:20px;
  }

.sfield {
    float: left;
    margin: 0px 0 0 8px;
    font: 8pt Arial;
    font-weight: bold;
    border-radius: 10px 10px 10px 10px;
    color: #000000;
    height: 18px;
    line-height: 0px;
    padding: 0;
    background: transparent;
    border: 0;
    max-width: 150px
  }

.headerstyle{
  background: #31D3AB;
  font: 12px Courier;
  text-align: center;
  font-weight: bold;  
}

.mystyle {
    color: #072832;
    font: 11px Verdana;
    text-align: center;                         
}

.checkboxtext
{
  /* Checkbox text */
  font-size: 100%;
  display: inline;
}

</style>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript">
    
    var ycsbData=null;
    var ycsbRunData=null;
    var render=true;
    var hasread=false;
    var haswrite=false;
    var genimg = getUrlVars()["img"];
    var urlts = getUrlVars()["runid"];
    var pbuild = getUrlVars()["build"];
    var pos = getUrlVars()["os"];
    var pdriver = getUrlVars()["driver"];
    var pdesc = getUrlVars()["description"];
    var trend = getUrlVars()["trends"];
    var movavg = getUrlVars()["movavg"];
    var exgtavg = getUrlVars()["exludegtavg"];

    var url=urlts==null?null:"http://10.10.88.136/puffd/ycsb/data.php?timestamp="+urlts;
    var ycsbRunLogURL=urlts==null?null:"http://10.10.88.136/puffd/ycsb/datalog.php?timestamp="+urlts;

    if(url != null){
      ycsbData = $.ajax({
            url: url,
            dataType: "json",
            async: false
            }).responseText;
    }

    var tabledata;
    var tablerows = getUrlVars()["rows"];
    if(!tablerows){
      tablerows = 10;
    }

    var table;
    var statstable;
    var tpchart;
    var ravgchart;
    var rminchart;
    var rmaxchart;
    var rp95chart;
    var rp99chart;
    var wavgchart;
    var wminchart;
    var wmaxchart;
    var wp95chart;
    var wp99chart;
    var trendchart = [];
    var trenddivs = [];
    var throughputchart = [];
    var throughputdivs = [];
    

    var selectedRows = [];

    // Load the Visualization API and the piechart package.
    //google.charts.load('current', {'packages':['table']});
    google.charts.load('current', {'packages':['corechart', 'table', 'line']});
      
    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawRunInfoTable);

    google.charts.setOnLoadCallback(init);

     function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
        });
        return vars;
      }

      function onLoadParams(){
        var myPopup = document.getElementById('tablelimit');
        for (var i = 0; i < myPopup.options.length; i++) {
            if (myPopup.options[i].value == tablerows)
                myPopup.options[i].selected = true;
        }
        if(trend != null){
          document.getElementById('charts').checked = true;
        }
        if(movavg != null){
          var movdropbox = document.getElementById('movingrange');
          for (var i = 0; i < movdropbox.options.length; i++) {
            if (movdropbox.options[i].value == movavg){
              movdropbox.options[i].selected = true;
              break;
            }
          }
        }
        if(exgtavg != null){
          var exfgtdrop = document.getElementById('excludegtavg');
          for (var i = 0; i < exfgtdrop.options.length; i++) {
            if (exfgtdrop.options[i].value == exgtavg){
              exfgtdrop.options[i].selected = true;
              break;
            }
          }
        }
      }
     
     function clearParams(){
        urlts = null;
        pbuild = null;
        pos = null;
        pdriver = null;
        pdesc = null;
        trend = null;
        movavg = null;
        exgtavg = null;
     }

     function init(){
      
      if(ycsbData==null){
        return;
      }
      // Draw Throughput 
      drawThroughputChart();
      if(!render){
        return;
      }
      drawStatsTable();

      if(hasread){
        showReadCharts();
        // Draw Read Avg 
        drawReadAvgChart();
        // Draw Min Avg 
        drawReadMinChart();
        // Draw Read Max laten
        drawReadMaxChart();
        drawReadp95Chart();
        drawReadp99Chart();
      }else{
        hideReadCharts();
      }

      if(haswrite){
         showWriteCharts();
        // Draw write charts
        drawWriteAvgChart();
        drawWriteMinChart();
        drawWriteMaxChart();
        drawWritep95Chart();
        drawWritep99Chart();
      }else{
        hideWriteCharts();
      }
      handleTrendCharts2();
     }

     function handleTrendCharts2(){
        if(trend != null){
           document.getElementById('charts').checked = true;
        }
        handleTrendCharts();
     }

     function handleTrendCharts(){
        if (document.getElementById('charts').checked && ycsbRunLogURL != null) 
        {
            ycsbRunData = $.ajax({
            url: ycsbRunLogURL,
            dataType: "json",
            async: false
            }).responseText;
        } else {
            ycsbRunData=null;
        }
        drawTrendCharts();
     }

     function hideReadCharts(){
        document.getElementById('ravg_div').style.display = "none";
        document.getElementById('rmax_div').style.display = "none";
        document.getElementById('rmin_div').style.display = "none";
        document.getElementById('rp95_div').style.display = "none";
        document.getElementById('rp99_div').style.display = "none";

        
      }

      function hideWriteCharts(){
        document.getElementById('wavg_div').style.display = "none";
        document.getElementById('wmax_div').style.display = "none";
        document.getElementById('wmin_div').style.display = "none";
        document.getElementById('wp95_div').style.display = "none";
        document.getElementById('wp99_div').style.display = "none";

        
      }

     function showReadCharts(){
        document.getElementById('ravg_div').style.display = "block";
        document.getElementById('rmax_div').style.display = "block";
        document.getElementById('rmin_div').style.display = "block";
        document.getElementById('rp95_div').style.display = "block";
        document.getElementById('rp99_div').style.display = "block";
     }

     function showWriteCharts(){
        document.getElementById('wavg_div').style.display = "block";
        document.getElementById('wmax_div').style.display = "block";
        document.getElementById('wmin_div').style.display = "block";
        document.getElementById('wp95_div').style.display = "block";
        document.getElementById('wp99_div').style.display = "block";
     }

     function changeTableList(){
         tablerows = document.getElementById("tablelimit").value;
         urlts=null;
         drawRunInfoTable();
     }

     function filterSearch(){
         pbuild = document.getElementById('buildSearch').value;
         pos = document.getElementById('osSearch').value;
         pdriver = document.getElementById('driverSearch').value;
         pdesc = document.getElementById('descSearch').value;
         urlts=null;
         drawRunInfoTable();
     }

     function selectHandler(e) {
      var selection = table.getSelection();
      var message = '';
      var timestamp;
      for (var i = 0; i < selection.length; i++) {
        var item = selection[i];
        if (item.row != null) {
          var str = tabledata.getFormattedValue(item.row, 0);
          timestamp=timestamp==null?str:timestamp+","+str;
          message += '{row:' + item.row + ', column:none}; value (col 0) = ' + str + '\n';
        }
      }
      if (timestamp == null) {
        message = 'nothing';
      }else{
         ycsbRunLogURL="http://10.10.88.136/puffd/ycsb/datalog.php?timestamp="+timestamp
         ycsbData = $.ajax({
          url: "http://10.10.88.136/puffd/ycsb/data.php?timestamp="+timestamp,
          dataType: "json",
          async: false
          }).responseText;
          //alert('You selected ' + timestamp);
          //console.log(ycsbData);
          var newurl = window.location.href;    
          if (newurl.indexOf('?') == -1){
             newurl += '?runid='+timestamp;
          }else{
            newurl = newurl.substring(0, newurl.indexOf('?')) + '?runid='+timestamp;
          }
          window.history.replaceState("object or string", "Title", newurl);
      }
      //alert(message);
      init();
    }

    function drawRunInfoTable() {
      var lurl = "http://10.10.88.136/puffd/ycsb/meta.php";
      var param=false;
      if(pbuild || pos || pdriver || urlts || pdesc)
      {
        if(pbuild != null){
            lurl+="?build="+pbuild;
            param=true;
        }
        if(pos != null){
            lurl+=(param?"&os=":"?os=")+pos;
            param=true;
        }
        if(pdriver != null){
            lurl+=(param?"&driver=":"?driver=")+pdriver;
            param=true;
        }
        if(urlts != null){
            lurl+=(param?"&timestamp=":"?timestamp=")+urlts;
        }
        if(pdesc != null){
            lurl+=(param?"&description=":"?description=")+pdesc;
        }  
        lurl+="&rows="+tablerows;
        onLoadParams();
      }else{
        lurl+="?rows="+tablerows
      }
      var ycsbMetadata = $.ajax({
          url: lurl,
          dataType: "json",
          async: false
          }).responseText;
      //alert('Metadata ' + lurl);
      var jsonData = JSON.parse(ycsbMetadata);
      tabledata = new google.visualization.DataTable();

      tabledata.addColumn('string', 'RunID');
      tabledata.addColumn('string', 'Description');
      tabledata.addColumn('string', 'Date');
      tabledata.addColumn('string', 'OS');
      tabledata.addColumn('string', 'Build');
      tabledata.addColumn('string', 'Driver Node');
      tabledata.addColumn('string', 'Row Size');
      tabledata.addColumn('number', 'Data Size (GB)');
      tabledata.addColumn('string', 'Table Type');
      tabledata.addColumn('number', '# of Tables');
      tabledata.addColumn('number', '# of Regions');
      tabledata.addColumn('number', '# of Nodes');
      tabledata.addColumn('number', '# of Clients');
      tabledata.addColumn('string', 'Network');
      tabledata.addColumn('number', '# of CPUs');
      tabledata.addColumn('number', 'Memory (GB)');
      tabledata.addColumn('number', 'Disk Space (TB)');
      tabledata.addColumn('string', 'Disk Type');
      tabledata.addColumn('number', '# of Disks/node');
      tabledata.addColumn('number', '# of MFS');

      for ( var i = 0; i < jsonData.length; i++) {
         var date = new Date(jsonData[i].timestamp);
         var datasize = jsonData[i].datasize/(1024*1024*1024);
         tabledata.addRow([""+jsonData[i].timestamp, 
         jsonData[i].description, 
         date.toString(),
         jsonData[i].os, 
         jsonData[i].build, 
         jsonData[i].driver, 
         ""+jsonData[i].rowsize, 
         datasize, 
         jsonData[i].tabletype, 
         jsonData[i].numtables, 
         jsonData[i].numregions, 
         jsonData[i].numnodes, 
         jsonData[i].numclients, 
         jsonData[i].network, 
         jsonData[i].totalcpus, 
         Math.floor(jsonData[i].totalmemory/1024), 
         Math.floor(jsonData[i].totalspace/1024), 
         jsonData[i].disktype,
         jsonData[i].numdisks, 
         jsonData[i].nummfs
        ]);
      }

      var cssClasses = {'headerCell': 'googleHeaderCell', 'oddTableRow': 'grey-background', 'selectedTableRow' : 'italic-font blue-text'};
      if(tpchart == null) {
        table = new google.visualization.Table(document.getElementById('runinfo_table_div'));
        google.visualization.events.addListener(table, 'select', selectHandler);
      }
      table.draw(tabledata, {'showRowNumber': true, 'width': '100%', 'alternatingRowStyle': true, 'cssClassNames': cssClasses});
    }

    function drawStatsTable(){
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      data.addColumn('string','Workload');
      data.addColumn('string','Type');
      data.addColumn('number','Threads');

      data.addColumn('number','Throughput (ops/sec/client)');
      data.addColumn('number','Write Avg Latency (μs)');
      data.addColumn('number','Write Min Latency (μs)');
      data.addColumn('number','Write Max Latency (μs)');
      data.addColumn('number','Write 95%ile Latency (ms)');
      data.addColumn('number','Write 99%ile Latency (ms)');
      data.addColumn('number','Read Avg Latency (μs)');
      data.addColumn('number','Read Min Latency (μs)');
      data.addColumn('number','Read Max Latency (μs)');
      data.addColumn('number','Read 95%ile Latency (ms)');
      data.addColumn('number','Read 99%ile Latency (ms)');
      
      var runlen=jsonData[0].data.length;
      for ( var j = 0; j < runlen; j++) {
         for ( var i = 0; i < jsonData.length; i++) {
          var cols = [];
          var rundata=jsonData[i].data;
          var idx = 0;
          if (jsonData[i].description != null) {
            cols[idx++]=jsonData[i].description;
          }else{
            cols[idx++]=""+jsonData[i].timestamp;
          }
          cols[idx++]=rundata[j].wrkldid;
          cols[idx++]=rundata[j].wrkldtype;
          cols[idx++]=rundata[j].threads;
          cols[idx++]=rundata[j].throughput;
         if(rundata[j].wrkldtype == "READ" || rundata[j].wrkldtype == "SCAN"){
            cols[idx++]=null;
            cols[idx++]=null;
            cols[idx++]=null;
            cols[idx++]=null
            cols[idx++]=null;
         }else{
            cols[idx++]=rundata[j].wavg;
            cols[idx++]=rundata[j].wmin;
            cols[idx++]=rundata[j].wmax;
            cols[idx++]=rundata[j].wp95;
            cols[idx++]=rundata[j].wp99;
         }

         if(rundata[j].wrkldtype == "LOAD" || rundata[j].wrkldtype == "DELETE"){
            cols[idx++]=null;
            cols[idx++]=null;
            cols[idx++]=null;
            cols[idx++]=null
            cols[idx++]=null;
         }else{
            cols[idx++]=rundata[j].ravg;
            cols[idx++]=rundata[j].rmin;
            cols[idx++]=rundata[j].rmax;
            cols[idx++]=rundata[j].rp95;
            cols[idx++]=rundata[j].rp99;
         }
         data.addRow(cols);
         data.setRowProperty(i+j,'style', 'background-color:red');
        }
      }

      var cssClasses = {'headerCell': 'headerstyle', 'tableCell':'mystyle'};
      if(statstable == null) {
        statstable = new google.visualization.Table(document.getElementById('stats_table_div'));
      }
      statstable.draw(data, {'allowHtml':true, 'showRowNumber': true, 'width': '95%', 'cssClassNames': cssClasses});
    }

    function drawThroughputChart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      var coltype = [];
      hasread = false;
      haswrite = false;
      var alldata = new Array(jsonData.length);
      var perserver = false;
      for ( var i = 0; i < jsonData.length; i++) {
         //console.log(jsonData[i]);
         var cols = [];
         var colidx=0;
         var rundata=jsonData[i].data;
         if (jsonData[i].description != null) {
            cols[colidx]=jsonData[i].description+" - " + jsonData[i].disktype + " - " + jsonData[i].build;
          }else{
            cols[colidx]=""+jsonData[i].timestamp;
          }
          alldata[i] = new Array(rundata.length+1);
          alldata[i][0] = cols[colidx];
          for ( var j = 0; j < rundata.length; j++) {
            if(i==0){
               colheaders[j]=rundata[j].wrkldid;
               coltype[j]=rundata[j].wrkldtype;
               if(rundata[j].wrkldtype == "READ" || rundata[j].wrkldtype == "SCAN"){
                  hasread=true;
               }else if (rundata[j].wrkldtype == "LOAD" || rundata[j].wrkldtype == "DELETE"){
                  haswrite=true;
               }else if (rundata[j].wrkldtype == "MIXED"){
                   hasread=true;
                   haswrite=true;
               }
            }else if(colheaders.length != rundata.length){
                alert("Different # of workloads in the selected runs. Select similar workload runs");
                render=false;
                return
            }else if(colheaders[j] != rundata[j].wrkldid && rundata[j].wrkldtype != coltype[j]){
                alert("Different workloads in the selected runs. Select similar workload runs");
                render=false;
                return
            }
            var numnodes=jsonData[i].numnodes;
            var numclients=jsonData[i].numclients;
            var totaltpt=rundata[j].throughput*numclients;
             
            if(numnodes < numclients){
              perserver = true;
            }
            var tpt=Math.round(totaltpt/numnodes);
            colidx++;
            cols[colidx]=tpt;
            colidx++;
            cols[colidx]=""+tpt;
            alldata[i][j+1]=tpt;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
               data.addColumn({ type: 'string', role: 'annotation' });
             }
           }
           data.addRow(cols);
      }

      if(genimg == null && jsonData.length == 2){
        for(var i = 1; i < alldata.length; i++) {
          var cols = [];
          var rowdata = alldata[i];
          var colidx=0;
          cols[colidx++]="Diff";
          for(var j = 1; j < rowdata.length; j++) {
              var diff=rowdata[j]-alldata[0][j];
              cols[colidx++]=diff;
              cols[colidx++]=""+diff;
          }
          //alert(cols);
          data.addRow(cols);
        }
      }

      var options = {
        title : 'Throughput (Client)',
        vAxis: {title: 'ops/sec/client', gridlines: { count: 10 }},
        //hAxis: {title: 'Run'},
        seriesType: 'bars',
        chartArea: {  width: "50%", height: "70%" },
        annotations: {
          textStyle: {
            fontSize: 10,
            italic: false,
            bold: false
          }
        }
      };

      var options2 = {
        title : 'Throughput (Server)',
        vAxis: {title: 'ops/sec/server', gridlines: { count: 10 }},
        //hAxis: {title: 'Run'},
        seriesType: 'bars',
        chartArea: {  width: "50%", height: "70%" },
        annotations: {
          textStyle: {
            fontSize: 12,
            italic: false,
            bold: false
          }
        }
      };

      if(tpchart == null) {
        tpchart = new google.visualization.ComboChart(document.getElementById('tp_div'));
        //console.log("yeahhhhh");
      }

      if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(tpchart, 'ready', function () {
          tp_div.innerHTML = '<img src="' + tpchart.getImageURI() + '">';
          //console.log(tp_div.innerHTML);
        });
      }

      if(perserver){
        tpchart.draw(data, options2);
      }else{
        tpchart.draw(data, options);
      }

      render=true;
    }

    function drawReadAvgChart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
         if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
         var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "LOAD"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].ravg;
             idx++;
           }
           if(i==0){
             data.addColumn('string','RunID');
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Read Average Latency',
        vAxis: {title: 'time (μs)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

      if(ravgchart == null) {
        ravgchart = new google.visualization.ComboChart(document.getElementById('ravg_div'));
      }
      if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(ravgchart, 'ready', function () {
          ravg_div.innerHTML = '<img src="' + ravgchart.getImageURI() + '">';
        });
      }
      ravgchart.draw(data, options);
    }

    function drawReadMinChart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
          if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
          var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "LOAD"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].rmin;
             idx++;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Read Min Latency',
        vAxis: {title: 'time (μs)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

      if(rminchart == null) {
        rminchart = new google.visualization.ComboChart(document.getElementById('rmin_div'));
      }
      if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(rminchart, 'ready', function () {
          rmin_div.innerHTML = '<img src="' + rminchart.getImageURI() + '">';
        });
      }
      rminchart.draw(data, options);
    }
    
     function drawReadMaxChart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
          if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
          var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "LOAD"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].rmax;
             idx++;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Read Max Latency',
        vAxis: {title: 'time (μs)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

      if(rmaxchart == null){
        rmaxchart = new google.visualization.ComboChart(document.getElementById('rmax_div'));
      }
      if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(rmaxchart, 'ready', function () {
          rmax_div.innerHTML = '<img src="' + rmaxchart.getImageURI() + '">';
        });
      }
      rmaxchart.draw(data, options);
    }

    function drawReadp95Chart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
         if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
          var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "LOAD"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].rp95;
             idx++;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Read 95%ile Latency',
        vAxis: {title: 'time (ms)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

       if(rp95chart == null){
         rp95chart = new google.visualization.ComboChart(document.getElementById('rp95_div'));
       }
      if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(rp95chart, 'ready', function () {
          rp95_div.innerHTML = '<img src="' + rp95chart.getImageURI() + '">';
        });
      }
      rp95chart.draw(data, options);
    }

    function drawReadp99Chart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
         if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
          var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "LOAD"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].rp99;
             idx++;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Read 99%ile Latency',
        vAxis: {title: 'time (ms)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

       if(rp99chart == null){
          rp99chart = new google.visualization.ComboChart(document.getElementById('rp99_div'));
      }
       if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(rp99chart, 'ready', function () {
          rp99_div.innerHTML = '<img src="' + rp99chart.getImageURI() + '">';
        });
      }
      rp99chart.draw(data, options);
    }

    function drawWriteAvgChart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
          if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
         var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "READ" || rundata[j].wrkldtype == "SCAN"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].wavg;
             idx++;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Write Average Latency',
        vAxis: {title: 'time (μs)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

      if(wavgchart == null) {
        wavgchart = new google.visualization.ComboChart(document.getElementById('wavg_div'));
      }
       if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(wavgchart, 'ready', function () {
          wavg_div.innerHTML = '<img src="' + wavgchart.getImageURI() + '">';
        });
      }
      wavgchart.draw(data, options);
    }

    function drawWriteMinChart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
          if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
          var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "READ" || rundata[j].wrkldtype == "SCAN"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].wmin;
             idx++;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Write Min Latency',
        vAxis: {title: 'time (μs)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

      if(wminchart == null) {
        wminchart = new google.visualization.ComboChart(document.getElementById('wmin_div'));
      }
      if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(wminchart, 'ready', function () {
          wmin_div.innerHTML = '<img src="' + wminchart.getImageURI() + '">';
        });
      }
      wminchart.draw(data, options);
    }
    
     function drawWriteMaxChart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
          if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
          var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "READ" || rundata[j].wrkldtype == "SCAN"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].wmax;
             idx++;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Write Max Latency',
        vAxis: {title: 'time (μs)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

      if(wmaxchart == null){
        wmaxchart = new google.visualization.ComboChart(document.getElementById('wmax_div'));
      }
      if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(wmaxchart, 'ready', function () {
          wmax_div.innerHTML = '<img src="' + wmaxchart.getImageURI() + '">';
        });
      }
      wmaxchart.draw(data, options);
    }

    function drawWritep95Chart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
          if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
          var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "READ" || rundata[j].wrkldtype == "SCAN"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].wp95;
             idx++;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Write 95%ile Latency',
        vAxis: {title: 'time (ms)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

       if(wp95chart == null){
         wp95chart = new google.visualization.ComboChart(document.getElementById('wp95_div'));
       }
      if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(wp95chart, 'ready', function () {
          wp95_div.innerHTML = '<img src="' + wp95chart.getImageURI() + '">';
        });
      }
      wp95chart.draw(data, options);
    }

    function drawWritep99Chart() {
      var jsonData = JSON.parse(ycsbData);
      var data = new google.visualization.DataTable();
      data.addColumn('string','RunID');
      var colheaders = [];
      for ( var i = 0; i < jsonData.length; i++) {
         var cols = [];
         var rundata=jsonData[i].data;
          if (jsonData[i].description != null) {
            cols[0]=jsonData[i].description+" - " + jsonData[i].build;
          }else{
            cols[0]=""+jsonData[i].timestamp;
          }
          var idx = 0;
          for ( var j = 0; j < rundata.length; j++) {
           if(rundata[j].wrkldtype == "READ" || rundata[j].wrkldtype == "SCAN"){
              continue;
            }
             colheaders[idx]=rundata[j].wrkldid;
             cols[idx+1]=rundata[j].wp99;
             idx++;
           }
           if(i==0){
             for(var k=0; k < colheaders.length; k++){
               data.addColumn('number', colheaders[k]);
             }
           }
           data.addRow(cols);
      }

      var options = {
        title : 'Write 99%ile Latency',
        vAxis: {title: 'time (ms)'},
        //hAxis: {title: 'Run'},
        seriesType: 'bars'
      };

       if(wp99chart == null){
        wp99chart = new google.visualization.ComboChart(document.getElementById('wp99_div'));
      }
      if(genimg != null){
        // Wait for the chart to finish drawing before calling the getImageURI() method.
        google.visualization.events.addListener(wp99chart, 'ready', function () {
          wp99_div.innerHTML = '<img src="' + wp99chart.getImageURI() + '">';
        });
      }
      wp99chart.draw(data, options);
    }

    function hideTrendCharts(){
        for(var i=0; i < trenddivs.length; i++){
          trenddivs[i].style.display = "none";
        }

        for(var i=0; i < throughputdivs.length; i++){
          throughputdivs[i].style.display = "none";
        }
      }

      function showTrendCharts(){
        for(var i=0; i < trenddivs.length; i++){
          trenddivs[i].style.display = "block";
        }

        for(var i=0; i < throughputdivs.length; i++){
          throughputdivs[i].style.display = "block";
        }
      }


    function drawTrendCharts() {
      if(ycsbRunData == null || ycsbRunData.length < 10){
        // Hide charts
        
        hideTrendCharts();
        return;
      }else{
         showTrendCharts();
      }

      var avgarr = [];
      var jsonStats = JSON.parse(ycsbData);
      for ( var i = 0; i < jsonStats.length; i++) {
          var rundata=jsonStats[i].data;
          var data = [];
          avgarr[i]=data;
          for ( var j = 0; j < rundata.length; j++) {
            if(rundata[j].wrkldtype == "READ" || rundata[j].wrkldtype == "SCAN"){
              data[j]=rundata[j].ravg;
            }else if(rundata[j].wrkldtype == "LOAD" || rundata[j].wrkldtype == "DELETE"){
              data[j]=rundata[j].wavg;
            }else{
              data[j]=rundata[j].ravg+","+rundata[j].wavg;
            }
          }
      }

      var dataarr = [];
      var opsarr = [];
      var jsonData = JSON.parse(ycsbRunData);
      var range= document.getElementById("movingrange").value;
      range=movavg!=null?movavg:range;
      var excludeavg=document.getElementById("excludegtavg").value;
      excludeavg=exgtavg!=null?exgtavg:excludeavg;

      for ( var i = 0; i < jsonData.length; i++) {
         var col = null;
         var rundata=jsonData[i].data;
          if (jsonData[i].description != null) {
            col =jsonData[i].description+" - " + jsonData[i].build;
          }else{
            col=""+jsonData[i].timestamp;
          }

          for ( var j = 0; j < rundata.length; j++) {
              var data = dataarr[j];
              if(data == null){
                 data = new google.visualization.DataTable();
                 data.addColumn('number','Time (secs)');
                 dataarr[j]=data;
              }
              var opsdata = opsarr[j];
              if(opsdata == null){
                 opsdata = new google.visualization.DataTable();
                 opsdata.addColumn('number','Time (secs)');
                 opsarr[j]=opsdata;
              }
              if(rundata[j].wrkldtype != "MIXED"){
                data.addColumn('number', col);
              }else{
                data.addColumn('number', col+"-READ");
                data.addColumn('number', col+"-WRITE");
              }
              opsdata.addColumn('number', col+"-opsrate");
              opsdata.addColumn('number', col+"-runrate");
          }
      }

      var wrklddataarr = [];
      var wrkldopsdataarr = [];
      var wrkldnames= [];
      var wrkldtypes= [];
      var wrkldloglen = [];
      for ( var i = 0; i < jsonData.length; i++) {
        var avgstats=avgarr[i];
        var rundata=jsonData[i].data;
        // Build the workload id, type & log data length
        for ( var j = 0; j < rundata.length; j++) {
          if(i == 0){
            wrkldnames[j]=rundata[j].wrkldid;
            wrkldtypes[j]=rundata[j].wrkldtype;
            wrkldloglen[j]=0;
          }

          var cols = wrklddataarr[j];
          if(cols == null){
            cols = new Array();
            wrklddataarr[j] = cols;
          }
          var opscols = wrkldopsdataarr[j];
          if(opscols == null){
            opscols = new Array();
            wrkldopsdataarr[j] = opscols;
          }

          var logdata=rundata[j].log;
          if( wrkldloglen[j]<logdata.length){
            wrkldloglen[j]=logdata.length;
          }
          for ( var m = 0; m < logdata.length; m++) 
          {
            if(cols[m] == null){
              cols[m] = new Array();
            }
            if(opscols[m] == null){
              opscols[m] = new Array(); 
            }
            cols[m][0]=logdata[m].time;
            opscols[m][0]=logdata[m].time;
            if(rundata[j].wrkldtype != "MIXED"){
              if(excludeavg > 0){
                if(logdata[m].avglat <= (excludeavg*avgstats[j])){
                  cols[m][i+1]=logdata[m].avglat;
                }else{
                  cols[m][i+1]=null;
                }
              }else{
                cols[m][i+1]=logdata[m].avglat;
              }
            }else{
              var myVar = avgstats[j];
              if (typeof myVar === 'string' || myVar instanceof String){

              }else{
                alert("not a string; it cannot be! sigh");
              }

              var res = avgstats[j].split(",");
              var idx=2*i;
              if(excludeavg > 0){
                if(logdata[m].ravglat <= (excludeavg*res[0]) && logdata[m].wavglat <= (excludeavg*res[1])){
                  cols[m][idx+1]=logdata[m].ravglat;
                  cols[m][idx+2]=logdata[m].wavglat;
                }else{
                  cols[m][idx+1]=null;
                  cols[m][idx+2]=null;
                }
              }else{
                cols[m][idx+1]=logdata[m].ravglat;
                cols[m][idx+2]=logdata[m].wavglat;
              }
            }
            var opsidx=2*i;
            opscols[m][opsidx+1]=logdata[m].opsrate;
            opscols[m][opsidx+2]=logdata[m].runrate;
          }
          if(logdata.length<wrkldloglen[j]){
            for(var x=logdata.length; x < wrkldloglen[j]; x++){
              if(rundata[j].wrkldtype != "MIXED"){
                cols[x][i+1]=null;
              }else{
                var idx=2*i;
                cols[x][idx+1]=null;
                cols[x][idx+2]=null;
              }
              var opsidx=2*i;
              opscols[x][opsidx+1]=null;
              opscols[x][opsidx+2]=null;
            }
          }
         }
      }

      for(var k=0; k < wrklddataarr.length; k++){
        var cols = wrklddataarr[k];
        var data = dataarr[k];
        var opscols = wrkldopsdataarr[k];
        var opsdata = opsarr[k];

        var avgcol = [];
        var avgopscol = [];
        var l = 0;
        for(var j=0; j < cols.length; j++, l++){
          if(avgcol.length == 0 && range > 0){
            for(var m=0; m < cols[j].length; m++){
              avgcol[m]=0;
            }
            for(var m=0; m < opscols[j].length; m++){
              avgopscol[m]=0;
            }
          }

          if(l != range && range > 0){
             for(var m=1; m < cols[j].length; m++){
                avgcol[m]+=cols[j][m];
             }
             for(var m=1; m < opscols[j].length; m++){
                avgopscol[m]+=opscols[j][m];
             }
          }else{
            if(range > 0){
              avgcol[0]=cols[j][0];
              for(var i=1;i<avgcol.length;i++){
                avgcol[i]=Math.floor(avgcol[i]/l);
              }
              data.addRow(avgcol);
              avgcol.length = 0;

              avgopscol[0]=opscols[j][0];
              for(var i=1;i<avgopscol.length;i++){
                avgopscol[i]=Math.floor(avgopscol[i]/l);
              }
              opsdata.addRow(avgopscol);
              avgopscol.length = 0;

              l=0;
            }else{
              data.addRow(cols[j]);
              opsdata.addRow(opscols[j]);
            }
          }
        }
      }

      for(var k=0; k < opsarr.length; k++){
        var options = {
          chart: {
            title: 'Throughput Trend for \''+ wrkldnames[k] + '\'',
            vAxis: {title:  wrkldtypes[k] + ' Throughput (ops/sec)'},
          },
          series: {
            // Gives each series an axis name that matches the Y-axis below.
            0: {axis: 'Throughput'}
          },
          axes: {
            // Adds labels to each axis; they don't have to match the axis names.
            y: {
              Throughput: {label: 'Throughput (ops/sec)'},
            }
          },
          hAxis: {format: 'none'},
          height: 500
        };

        var options2 = {
          title: 'Throughput Trend for \''+ wrkldnames[k] + '\' ' + (range>0?'( '+range+ 's moving average)':''),
          chartArea: {  width: "60%", height: "70%" },
          legend: {position: 'right', textStyle: {bold:true, fontSize: 16}},
          hAxis: {
            title: 'Time (secs)',
          },
          vAxis: {
            title: wrkldtypes[k] + ' Throughput (ops/sec)',
            gridlines: { count: 10 }
          },
          height: 600
          //,colors: ['#a52714', '#097138']  
        };

        var data = opsarr[k];
        var iDiv = throughputdivs[k];
        if(iDiv == null){
          iDiv = document.createElement('div');
          iDiv.id = 'div_throughput_'+wrkldnames[k];
          iDiv.className = 'block';
          iDiv.setAttribute("align","center");
          iDiv.setAttribute("style","width:95%");
          document.getElementsByTagName('body')[0].appendChild(iDiv);
          throughputdivs[k]=iDiv;
        }

         
        var chart = throughputchart[k];
        if(chart == null){
          chart = new google.visualization.LineChart(iDiv)
          //chart = new google.charts.Line(iDiv);
          throughputchart[k]=chart;
        }

        options=options2;
        if(genimg != null){
          // Wait for the chart to finish drawing before calling the getImageURI() method.
          google.visualization.events.addListener(chart, 'ready', function () {
          iDiv.innerHTML = '<img src="' + chart.getImageURI() + '">';
          });
        }

        chart.draw(data, options);         
      }      

      for(var k=0; k < dataarr.length; k++){
        var options = {
          chart: {
            title: 'Latency Trend for \''+ wrkldnames[k] + '\' workload',
            subtitle: ' Moving average of ' + range + 'secs',
            vAxis: {title: 'Latency (μs)'},
          },
          series: {
            // Gives each series an axis name that matches the Y-axis below.
            0: {axis: 'Latency'}
          },
          axes: {
            // Adds labels to each axis; they don't have to match the axis names.
            y: {
              Latency: {label: 'Latency (μs)'},
            }
          },
          hAxis: {format: 'none'},
          height: 500
        };

        var options2 = {
          title: 'Latency Trend for \''+ wrkldnames[k] + '\' ' + (range>0?'( '+range+ 's moving average)':''),
          chartArea: {  width: "60%", height: "70%" },
          legend: {position: 'right', textStyle: {bold:true, fontSize: 16}},
          hAxis: {
            title: 'Time (secs)',
          },
          vAxis: {
            title: wrkldtypes[k] + ' Latency (μs)',
            gridlines: { count: 10 }
          },
          interpolateNulls: true,
          height: 600
          //,colors: ['#a52714', '#097138']  
        };

        var data = dataarr[k];
        var iDiv = trenddivs[k];
        if(iDiv == null){
          iDiv = document.createElement('div');
          iDiv.id = 'div_'+wrkldnames[k];
          iDiv.className = 'block';
          iDiv.setAttribute("align","center");
          iDiv.setAttribute("style","width:95%");
          document.getElementsByTagName('body')[0].appendChild(iDiv);
          trenddivs[k]=iDiv;
        }

         
        var chart = trendchart[k];
        if(chart == null){
          chart = new google.visualization.LineChart(iDiv)
          //chart = new google.charts.Line(iDiv);
          trendchart[k]=chart;
        }

        options=options2;
        if(genimg != null){
          // Wait for the chart to finish drawing before calling the getImageURI() method.
          google.visualization.events.addListener(chart, 'ready', function () {
          iDiv.innerHTML = '<img src="' + chart.getImageURI() + '">';
          });
        }

        chart.draw(data, options);         
      }
      
    }

    </script>
  </head>

  <body onload="onLoadParams();">
  <a href="http://10.10.88.136/puffd/ycsb" onclick="clearParams()"><i class="material-icons">home</i></a>
 
    
   
    <!--div id="table_div"></div-->
    <style>
        table.equalDivide tr td { width:50%;}
    </style>

    <div  align="right">
      <table id="table2" cellpadding="0" cellspacing="8" width="50%" border="0">
        <tr>
          <td class="search-bar" >
              <input type="text" class="sfield" id="descSearch" placeholder="Description..." onkeydown = "if (event.keyCode == 13) document.getElementById('goSearch').click()"/>
              <input type="image" class="searchbutton" src="http://www.spheretekk.com/bc/images/search-icon.gif" alt="Search" onclick = "filterSearch();"/>
           </td>
          
          <td class="search-bar" >
            <input type="text" class="sfield" id="osSearch" placeholder="OS..." onkeydown = "if (event.keyCode == 13) document.getElementById('goSearch').click()"/>
            <input type="image" class="searchbutton" src="http://www.spheretekk.com/bc/images/search-icon.gif" alt="Search" onclick = "filterSearch();"/>
          </td>
          
          <td class="search-bar" >
            <input type="text" class="sfield" id="buildSearch" placeholder="Build..." onkeydown = "if (event.keyCode == 13) document.getElementById('goSearch').click()"/>
            <input type="image" class="searchbutton" src="http://www.spheretekk.com/bc/images/search-icon.gif" alt="Search" onclick = "filterSearch();"/>
            
          </td>

          <td class="search-bar" >
            <input type="text" class="sfield" id="driverSearch" placeholder="Driver..." onkeydown = "if (event.keyCode == 13) document.getElementById('goSearch').click()"/>
            <input type="image" class="searchbutton" src="http://www.spheretekk.com/bc/images/search-icon.gif" alt="Search" onclick = "filterSearch();"/>
          </td>

          <td>
            <input type = "button" id = "goSearch" hidden="true" onclick = "filterSearch();"/>
          </td>
          <td align="right">
              Display :
            <select id="tablelimit" onChange="changeTableList();">
              <option selected="selected" value="0"></option>
              <option value="5">5</option>
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="all">all</option>
            </select> rows
            </td>
        </tr>
       </table>
    </div>
   
    <br>
     <div id="runinfo_table_div"></div>
     <div align="left"> select row(s) to render </div>
     <div align="right">
             <input type="checkbox" id="charts" value="Trends?" onclick="handleTrendCharts();" title="View charts for the run. (might take a while) If data present, charts will be loaded at the bottom of the page."/>
             <span class="checkboxtext">Trends</span>
             ; Moving avg - 
             <select id="movingrange" onChange="handleTrendCharts();">
                <option selected="selected" value="0">0</option>
                <option value="30">30</option>
                <option value="60">60</option>
                <option value="90">90</option>
                <option value="120">120</option>
                <option value="150">150</option>
                <option value="180">180</option>
                <option value="210">210</option>
                <option value="240">240</option>
                <option value="270">270</option>
                <option value="300">300</option>
              </select> secs
              ; Exclude -
              <select id="excludegtavg" onChange="handleTrendCharts();">
                <option selected="selected" value="0"></option>
                <option value="2">>2x</option>
                <option value="5">>5x</option>
                <option value="10">>10x</option>
                <option value="25">>25x</option>
                <option value="50">>50x</option>
                <option value="100">>100x</option>
                <option value="200">>200x</option>
              </select> avg
      </div>
    <br>
    <br>
    <br>

    <table id="table" class="equalDivide" cellpadding="0" cellspacing="0" width="100%" border="0">
    <tr>
         <div id="stats_table_div" align="center"></div>
    </tr>
    <tr>
        <div id="tp_div" style="height: 500px;"></div>
    </tr>
    <tr>
        <td id="td_ravg">
          <div id="ravg_div" style="height: 400px;"></div>
        </td>
        <td id="td_wavg">
           <div id="wavg_div" style="height: 400px;"></div>
        </td>
    </tr>
    <tr>
        <td id="td_rmax">
          <div id="rmax_div" style="height: 400px;"></div>
        </td>
         <td id="td_wmax">
          <div id="wmax_div" style="height: 400px;"></div>
        </td>
    </tr>
    <tr>
        <td id="td_rmin">
          <div id="rmin_div" style="height: 400px;"></div>
        </td>
        <td id="td_wmin">
          <div id="wmin_div" style="height: 400px;"></div>
        </td>
     </tr>
      <tr>
         <td id="td_rp95">
         <div id="rp95_div" style="height: 400px;"></div>
        </td>
         <td id="td_wp95">
         <div id="wp95_div" style="height: 400px;"></div>
        </td>
    </tr>
    <tr>
         <td id="td_rp99">
          <div id="rp99_div" style="height: 400px;"></div>
        </td>
        <td id="td_wp99">
          <div id="wp99_div" style="height: 400px;"></div>
        </td>
    </tr>
    </table>

    
  </body>
</html>